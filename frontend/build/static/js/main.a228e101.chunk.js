(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{125:function(e,t,n){},252:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),s=n(15),i=n.n(s),o=(n(125),n(25)),l=n(12),d=n(6),u=n(9),j=n.n(u),b=n(19),p=n(17),f=n.n(p),h="USER_REGISTER_REQUEST",O="USER_REGISTER_SUCCESS",x="USER_REGISTER_FAIL",m="USER_SIGNIN_REQUEST",v="USER_SIGNIN_SUCCESS",g="USER_SIGNIN_FAIL",E="USER_SIGGNOUT",y="USER_DETAIL_REQUEST",S="USER_DETAIL_SUCCESS",_="USER_DETAIL_FAIL",w="USER_DETAIL_RESET",I="USER_UPDATE_PROFILE_REQUEST",N="USER_UPDATE_PROFILE_SUCCESS",U="USER_UPDATE_PROFILE_FAIL",C="USER_UPDATE_PROFILE_RESET",F="USER_LIST_REQUEST",L="USER_LIST_SUCCESS",D="USER_LIST_FAIL",k="USER_DELETE_REQUEST",A="USER_DELETE_SUCCESS",T="USER_DELTE_FAIL",R="USER_UPDATE_REQUEST",P="USER_UPDATE_SUCCESS",B="USER_UPPDATE_FAIL",Q=function(){return function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a,r,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:F}),a=n(),r=a.userSignin.userInfo,e.prev=2,e.next=5,f.a.get("/api/user",{headers:{Authorization:"Bearer ".concat(null===r||void 0===r?void 0:r.token)}});case 5:c=e.sent,s=c.data,t({type:L,payload:s}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t({type:D,payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}()},z=n(1);function M(){return Object(z.jsxs)("div",{className:"loading",children:[Object(z.jsx)("i",{className:"fa fa-spiner fa-spin"})," Loading..."]})}function q(e){return Object(z.jsx)("div",{className:"alert alert-".concat(e.variant||"info"),children:e.children})}function G(e){var t=Object(a.useState)(""),n=Object(d.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(""),l=Object(d.a)(i,2),u=l[0],p=l[1],h=e.location.search?e.location.search.split("=")[1]:"/",O=Object(c.c)((function(e){return e.userSignin})),x=O.userInfo,E=O.loading,y=O.error,S=Object(c.b)();return Object(a.useEffect)((function(){x&&e.history.push(h)}),[e.history,h,x]),Object(z.jsx)("div",{children:Object(z.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),S(function(e,t){return function(){var n=Object(b.a)(j.a.mark((function n(a){var r,c;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:m,payload:{email:e,password:t}}),n.prev=1,n.next=4,f.a.post("/api/user/signin",{email:e,password:t});case 4:r=n.sent,c=r.data,a({type:v,payload:c}),localStorage.setItem("userInfo",JSON.stringify(c)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),a({type:g,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}()}(r,u))},children:[Object(z.jsx)("div",{children:Object(z.jsx)("h1",{children:"Sign In"})}),E&&Object(z.jsx)(M,{}),y&&Object(z.jsx)(q,{variant:"danger",children:y}),Object(z.jsxs)("div",{children:[Object(z.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(z.jsx)("input",{type:"text",id:"email",placeholder:"Enter email",required:!0,onChange:function(e){return s(e.target.value)}})]}),Object(z.jsxs)("div",{children:[Object(z.jsx)("label",{htmlFor:"password",children:"Password"}),Object(z.jsx)("input",{type:"password",id:"password",placeholder:"Enter password",required:!0,onChange:function(e){return p(e.target.value)}})]}),Object(z.jsxs)("div",{children:[Object(z.jsx)("label",{}),Object(z.jsx)("button",{className:"primary",type:"submit",children:"Sign In"})]}),Object(z.jsxs)("div",{children:[Object(z.jsx)("label",{}),Object(z.jsxs)("div",{children:["New User? ",Object(z.jsx)(o.b,{to:"/register?redirect=$",children:"Create New Account"})]})]})]})})}var Y=n(5),V="LICENSE_LIST_REQUEST",J="LICENSE_LIST_SUCCESS",H="LICENSE_LIST_FAIL",X="LICENSE_UPDATE_REQUEST",K="LICENSE_UPDATE_SUCCESS",$="LICENSE_LIST_FAIL",W="LICENSE_DELETE_REQUEST",Z="LICENSE_DELETE_SUCCESS",ee="LICENSE_DELETE_FAIL",te=function(){return function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a,r,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:V}),a=n(),r=a.userSignin.userInfo,e.prev=2,e.next=5,f.a.get("/api/license",{headers:{Authorization:"Bearer ".concat(null===r||void 0===r?void 0:r.token)}});case 5:c=e.sent,s=c.data,t({type:J,payload:s}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t({type:H,payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}()},ne=n(35),ae=n.n(ne),re=n(263),ce=n(261),se=n(262),ie=n(264),oe=n(36),le=n.n(oe),de=n(33),ue=n.n(de),je=n(104),be=n.n(je);function pe(e){return be()(e).format("YYYY-MM-DD")}function fe(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.licenseList})),n=t.loading,r=t.error,s=t.licenses;Object(a.useEffect)((function(){e(te())}),[e]);var i=Object(a.useState)(!1),o=Object(d.a)(i,2),l=o[0],u=o[1],p=Object(a.useState)(!1),h=Object(d.a)(p,2),O=h[0],x=h[1],m=Object(a.useState)({}),v=Object(d.a)(m,2),g=v[0],E=v[1],y=Object(a.useState)(Date),S=Object(d.a)(y,2),_=S[0],w=S[1],I=Object(a.useState)(0),N=Object(d.a)(I,2),U=N[0],C=N[1],F=Object(a.useState)(0),L=Object(d.a)(F,2),D=L[0],k=L[1],A=Object(a.useState)(0),T=Object(d.a)(A,2),R=T[0],P=T[1],B=Object(a.useState)(""),Q=Object(d.a)(B,2),G=Q[0],V=Q[1],J=Object(a.useState)(!1),H=Object(d.a)(J,2),ne=H[0],oe=H[1],je=Object(c.c)((function(e){return e.licenseUpdate})).updated;Object(a.useEffect)((function(){je&&(u(!1),e(te()))}),[je,e]);var be=Object(c.c)((function(e){return e.licenseDelete})).deleted;Object(a.useEffect)((function(){be&&(x(!1),e(te()))}),[be,e]),Object(a.useEffect)((function(){var e=ne?new Date(Date.now()):new Date(g.date);U&&e.setFullYear(e.getFullYear()+parseInt(U)),D&&e.setMonth(e.getMonth()+parseInt(D)),R&&e.setDate(e.getDate()+parseInt(R)),w(e)}),[R,D,U,g,ne]);var fe=[{dataField:"#",text:"No",formatter:function(e,t,n){return Object(z.jsx)("span",{children:n+1})}},{dataField:"deviceId",text:"DeviceId",sort:!0},{dataField:"date",text:"License Date",formatter:pe,sort:!0},{dataField:"createdAt",text:"Created Date",formatter:pe,sort:!0},{dataField:"updatedAt",text:"Updated Date",formatter:pe,sort:!0},{dataField:"updatedBy",text:"Updated By"},{dataField:"edit",text:"Action",sort:!1,formatter:function(e,t,n,a){return Object(z.jsxs)("div",{style:{textAlign:"center",cursor:"pointer",lineHeight:"normal"},children:[Object(z.jsx)("span",{onClick:function(){return Oe(t)},children:Object(z.jsx)("i",{className:"fa fa fa-pencil-square-o"})})," ",Object(z.jsx)("span",{onClick:function(){return e=t,x(!0),void E(e);var e},children:Object(z.jsx)("i",{className:"fa fa-trash-o"})})]})},headerAttrs:{width:100},attrs:{width:100,class:"EditRow"}}],he=de.Search.SearchBar;function Oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(w(e.date),E(e),oe(!1)):(w(Date.now()),E({}),oe(!0)),P(0),k(0),C(0),u(!0)}function xe(){var t;e((t={_id:g._id,deviceId:G,date:_},function(){var e=Object(b.a)(j.a.mark((function e(n,a){var r,c,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n({type:X}),r=a(),c=r.userSignin.userInfo,e.prev=2,!t._id){e.next=9;break}return e.next=6,f.a.put("/api/license/"+t._id,t,{headers:{Authorization:"Bearer ".concat(null===c||void 0===c?void 0:c.token)}});case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,f.a.post("/api/license",t,{headers:{Authorization:"Bearer ".concat(null===c||void 0===c?void 0:c.token)}});case 11:e.t0=e.sent;case 12:s=e.t0,i=s.res,n({type:K,payload:i}),e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),n({type:$,payload:e.t1.message});case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t,n){return e.apply(this,arguments)}}()))}function me(){var t;e((t={id:g._id},function(){var e=Object(b.a)(j.a.mark((function e(n,a){var r,c,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:W}),r=a(),c=r.userSignin.userInfo,e.prev=2,e.next=5,f.a.delete("/api/license/"+t.id,{headers:{Authorization:"Bearer ".concat(null===c||void 0===c?void 0:c.token)}});case 5:s=e.sent,i=s.res,n({type:Z,payload:i}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),n({type:ee,payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}()))}return Object(z.jsxs)("div",{children:[Object(z.jsx)("h1",{className:"title",children:"License Management"}),n?Object(z.jsx)(M,{}):r?Object(z.jsx)(q,{variant:"danger",children:r}):Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(re.a,{show:l,children:Object(z.jsx)(re.a.Body,{children:Object(z.jsxs)(ce.a,{children:[Object(z.jsx)(re.a.Title,{children:ne?Object(z.jsx)(z.Fragment,{children:"New Device"}):Object(z.jsxs)(z.Fragment,{children:['Update Device "',g.deviceId,'" ']})}),ne?Object(z.jsxs)("div",{className:"formgroup mt-2",children:[Object(z.jsx)("label",{children:"DeviceId:"}),Object(z.jsx)("input",{type:"text",className:"form-control",onChange:function(e){return V(e.target.value)}})]}):Object(z.jsxs)("div",{className:"mt-4",children:[Object(z.jsx)("label",{children:"Current License Date:"})," ",pe(g.date)]}),Object(z.jsxs)("div",{className:"mt-4",children:[Object(z.jsx)("label",{children:"Target License Date:"})," ",pe(_)]}),Object(z.jsxs)(se.a,{className:"mt-4",children:[Object(z.jsxs)("div",{className:"formgroup col-4",children:[Object(z.jsx)("label",{children:"Year:"}),Object(z.jsx)("input",{type:"number",min:"0",step:"1",className:"form-control",onChange:function(e){return C(e.target.value)}})]}),Object(z.jsxs)("div",{className:"formgroup col-4",children:[Object(z.jsx)("label",{children:"Month:"}),Object(z.jsx)("input",{type:"number",min:"0",step:"1",className:"form-control",onChange:function(e){return k(e.target.value)}})]}),Object(z.jsxs)("div",{className:"formgroup col-4",children:[Object(z.jsx)("label",{children:"Date:"}),Object(z.jsx)("input",{type:"number",min:"0",step:"1",className:"form-control",onChange:function(e){return P(e.target.value)}})]})]}),Object(z.jsxs)("div",{className:"flex mt-2",children:[Object(z.jsx)(ie.a,{className:"m-2 float-end btn btn-danger",onClick:function(){return u(!1)},children:"Cancel"}),Object(z.jsx)(ie.a,{className:"m-2 float-end btn btn-primary",onClick:function(){return xe()},children:"Update"})]})]})})}),Object(z.jsx)(re.a,{show:O,children:Object(z.jsx)(re.a.Body,{children:Object(z.jsxs)(ce.a,{children:[Object(z.jsx)(re.a.Title,{className:"m-1",children:"Delete Device"}),Object(z.jsxs)("p",{children:['Do you want really Device "',g.deviceId,'"']}),Object(z.jsxs)("div",{className:"flex mt-2",children:[Object(z.jsx)(ie.a,{className:"m-2 float-end btn btn-danger",onClick:function(){return x(!1)},children:"Cancel"}),Object(z.jsx)(ie.a,{className:"m-2 float-end btn btn-primary",onClick:function(){return me()},children:"Delete"})]})]})})}),Object(z.jsx)(ue.a,{keyField:"_id",data:s,columns:fe,search:{searchFormatted:!0},children:function(e){return Object(z.jsxs)("div",{className:"flex",children:[Object(z.jsx)(he,Object(Y.a)(Object(Y.a)({},e.searchProps),{},{className:"m-2"})),Object(z.jsx)(ie.a,{className:"float-end",onClick:function(){return Oe()},children:"New Device"}),Object(z.jsx)(ae.a,Object(Y.a)(Object(Y.a)({},e.baseProps),{},{pagination:le()()}))]})}})]})]})}function he(e){var t=Object(a.useState)(""),n=Object(d.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(""),l=Object(d.a)(i,2),u=l[0],p=l[1],m=Object(a.useState)(""),g=Object(d.a)(m,2),E=g[0],y=g[1],S=Object(a.useState)(""),_=Object(d.a)(S,2),w=_[0],I=_[1],N=e.location.search?e.location.search.split("=")[1]:"/",U=Object(c.c)((function(e){return e.userRegister})),C=U.userInfo,F=U.loading,L=U.error,D=Object(c.b)();return Object(a.useEffect)((function(){C&&e.history.push(N)}),[e.history,N,C]),Object(z.jsx)("div",{children:Object(z.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),E!==w?alert("Password and confirm password are not match"):D(function(e,t,n){return function(){var a=Object(b.a)(j.a.mark((function a(r){var c,s;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:h,payload:{email:t,password:n}}),a.prev=1,a.next=4,f.a.post("/api/user/register",{name:e,email:t,password:n});case 4:c=a.sent,s=c.data,r({type:O,payload:s}),r({type:v,payload:s}),localStorage.setItem("userInfo",JSON.stringify(s)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),r({type:x,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}()}(r,u,E))},children:[Object(z.jsx)("div",{children:Object(z.jsx)("h1",{children:"Register"})}),F&&Object(z.jsx)(M,{}),L&&Object(z.jsx)(q,{variant:"danger",children:L}),Object(z.jsxs)("div",{children:[Object(z.jsx)("label",{htmlFor:"email",children:"Name"}),Object(z.jsx)("input",{type:"text",id:"name",placeholder:"Enter name",required:!0,onChange:function(e){return s(e.target.value)}})]}),Object(z.jsxs)("div",{children:[Object(z.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(z.jsx)("input",{type:"email",id:"email",placeholder:"Enter email",required:!0,onChange:function(e){return p(e.target.value)}})]}),Object(z.jsxs)("div",{children:[Object(z.jsx)("label",{htmlFor:"password",children:"Password"}),Object(z.jsx)("input",{type:"password",id:"password",placeholder:"Enter password",required:!0,onChange:function(e){return y(e.target.value)}})]}),Object(z.jsxs)("div",{children:[Object(z.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),Object(z.jsx)("input",{type:"password",id:"confirmPassword",placeholder:"Enter confirm password",required:!0,onChange:function(e){return I(e.target.value)}})]}),Object(z.jsxs)("div",{children:[Object(z.jsx)("label",{}),Object(z.jsx)("button",{className:"primary",type:"submit",children:"Register"})]}),Object(z.jsxs)("div",{children:[Object(z.jsx)("label",{}),Object(z.jsxs)("div",{children:["Already have an account? ",Object(z.jsx)(o.b,{to:"/sinin",children:"Sign In"})]})]})]})})}function Oe(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),i=Object(d.a)(s,2),o=i[0],l=i[1],u=Object(a.useState)(""),p=Object(d.a)(u,2),h=p[0],O=p[1],x=Object(a.useState)(""),m=Object(d.a)(x,2),g=m[0],E=m[1],w=Object(c.c)((function(e){return e.userSignin})).userInfo,F=Object(c.c)((function(e){return e.userDetails})),L=F.loading,D=F.error,k=F.user,A=Object(c.c)((function(e){return e.userUpdateProfile})),T=A.success,R=A.error,P=A.loading,B=Object(c.b)();Object(a.useEffect)((function(){var e;console.log(k),k?(r(k.name),l(k.email)):(B({type:C}),B((e=w._id,function(){var t=Object(b.a)(j.a.mark((function t(n,a){var r,c,s,i,o;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:y,payload:e}),r=a(),c=r.userSignin.userInfo,t.prev=2,t.next=5,f.a.get("/api/user/".concat(e),{headers:{Authorization:"Bearer ".concat(null===c||void 0===c?void 0:c.token)}});case 5:s=t.sent,i=s.data,n({type:S,payload:i}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),o=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message,n({type:_,payload:o});case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}())))}),[B,w._id,k]);return Object(z.jsx)("div",{children:Object(z.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),h!==g?alert("Password and Confirm Password Are Not Matched"):B(function(e){return function(t,n){t({type:I,payload:e});var a=n().userSignin.userInfo;try{var r=f.a.put("/api/user/profile",e,{headers:{Authorization:"Bearer ".concat(a.token)}}).data;t({type:N,payload:r}),t({type:v,payload:r}),localStorage.setItem("userInfo",JSON.stringify(r))}catch(D){var c=D.response&&D.response.data.message?D.response.data.message:D.message;t({type:U,payload:c})}}}({userId:k._id,name:n,email:o,password:h}))},children:[Object(z.jsx)("div",{children:Object(z.jsx)("h1",{children:"Uer Profile"})}),L?Object(z.jsx)(M,{}):D?Object(z.jsx)(q,{variant:"danger",children:D}):Object(z.jsxs)(z.Fragment,{children:[P&&Object(z.jsx)(M,{}),R&&Object(z.jsx)(q,{variant:"danger",children:R}),T&&Object(z.jsx)(q,{variant:"success",children:"Profile Updated"}),Object(z.jsxs)("div",{children:[Object(z.jsx)("label",{htmlFor:"name",children:"Name"}),Object(z.jsx)("input",{id:"name",type:"text",placeholder:"Enter name",value:n,onChange:function(e){return r(e.target.value)}})]}),Object(z.jsxs)("div",{children:[Object(z.jsx)("label",{htmlFor:"email",children:"Email"}),Object(z.jsx)("input",{id:"email",type:"email",placeholder:"Enter email",value:o,onChange:function(e){return l(e.target.value)}})]}),Object(z.jsxs)("div",{children:[Object(z.jsx)("label",{htmlFor:"password",children:"Password"}),Object(z.jsx)("input",{id:"password",type:"password",placeholder:"Enter password",onChange:function(e){return O(e.target.value)}})]}),Object(z.jsxs)("div",{children:[Object(z.jsx)("label",{htmlFor:"confirmPassword",children:"confirmPassword"}),Object(z.jsx)("input",{id:"confirmPassword",type:"password",placeholder:"Enter confirm password",onChange:function(e){return E(e.target.value)}})]}),Object(z.jsxs)("div",{children:[Object(z.jsx)("label",{}),Object(z.jsx)("button",{className:"primary",type:"submit",children:"Update"})]})]})]})})}var xe=n(13),me=["component"];function ve(e){var t=e.component,n=Object(xe.a)(e,me),a=Object(c.c)((function(e){return e.userSignin})).userInfo;return Object(z.jsx)(l.b,Object(Y.a)(Object(Y.a)({},n),{},{render:function(e){return a?Object(z.jsx)(t,Object(Y.a)({},e)):Object(z.jsx)(l.a,{to:"/signin"})}}))}var ge="FILE_LIST_REQUEST",Ee="FILE_LIST_SUCCESS",ye="FILE_LIST_FAIL",Se="FILE_UPLOAD_REQUEST",_e="FILE_UPLOAD_SUCCESS",we="FILE_UPLOAD_FAIL",Ie="FILE_DELETE_REQUEST",Ne="FILE_DELETE_SUCCESS",Ue="FILE_DELETE_FAIL",Ce=function(){return function(){var e=Object(b.a)(j.a.mark((function e(t,n){var a,r,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:ge}),a=n(),r=a.userSignin.userInfo,e.prev=2,e.next=5,f.a.get("/api/file",{headers:{Authorization:"Bearer ".concat(null===r||void 0===r?void 0:r.token)}});case 5:c=e.sent,s=c.data,t({type:Ee,payload:s}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),t({type:ye,payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}()},Fe=n(108),Le=n.n(Fe);n(208);function De(){var e=de.Search.SearchBar,t=Object(c.b)(),n=Object(c.c)((function(e){return e.fileList})),r=n.loading,s=n.error,i=n.files;Object(a.useEffect)((function(){t(Ce())}),[t]);var o=Object(a.useState)(!1),l=Object(d.a)(o,2),u=l[0],p=l[1];Object(a.useEffect)((function(){u&&m(null)}),[u]);var h=Object(a.useState)(null),O=Object(d.a)(h,2),x=O[0],m=O[1],v=Object(a.useState)(new Date),g=Object(d.a)(v,2),E=g[0],y=g[1],S=Object(a.useState)(!1),_=Object(d.a)(S,2),w=_[0],I=_[1],N=Object(a.useState)(""),U=Object(d.a)(N,2),C=U[0],F=U[1];Object(a.useEffect)((function(){I(!0)}),[C]);var L=Object(c.c)((function(e){return e.fileUpload})).uploaded;Object(a.useEffect)((function(){L&&(p(!1),t(Ce()))}),[L,t]);var D=Object(c.c)((function(e){return e.fileDelete})).deleted;Object(a.useEffect)((function(){D&&(I(!1),t(Ce()))}),[D,t]);var k=[{dataField:"#",text:"No",formatter:function(e,t,n){return Object(z.jsx)("span",{children:n+1})}},{dataField:"name",text:"Name",sort:!0,formatter:function(e,n){return Object(z.jsx)("span",{onClick:function(){var e;t((e=n._id,function(){var t=Object(b.a)(j.a.mark((function t(n,a){var r,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"FILE_GET_REQUEST"}),r=a(),c=r.userSignin.userInfo,t.prev=2,t.next=5,f.a.get("/api/file/"+e,{headers:{Authorization:"Bearer ".concat(null===c||void 0===c?void 0:c.token)}});case 5:n({type:"FILE_GET_SUCCESS"}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),n({type:"FILE_GET_FAIL"});case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,n){return t.apply(this,arguments)}}()))},children:e})}},{dataField:"date",text:"Date",formatter:pe,sort:!0},{dataField:"createdAt",text:"Uploaded Date",formatter:pe,sort:!0},{dataField:"updatedBy",text:"Uploaded By"},{dataField:"edit",text:"Action",sort:!1,formatter:function(e,t){return Object(z.jsx)("div",{style:{textAlign:"center",cursor:"pointer",lineHeight:"normal"},children:Object(z.jsx)("span",{onClick:function(){return F(t)},children:Object(z.jsx)("i",{className:"fa fa-trash-o"})})})},headerAttrs:{width:100},attrs:{width:100,class:"EditRow"}}];return Object(z.jsxs)("div",{children:[Object(z.jsx)("h1",{className:"title",children:"File Management"}),r?Object(z.jsx)(M,{}):s?Object(z.jsx)(q,{variant:"danger",children:s}):Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(re.a,{show:u,children:Object(z.jsx)(re.a.Body,{children:Object(z.jsxs)(ce.a,{children:[Object(z.jsx)(re.a.Title,{children:"Upload File"}),Object(z.jsx)("input",{type:"file",className:"form-control mt-4",multiple:!0,accept:".csv",onChange:function(e){return m(e.target.files)}}),Object(z.jsxs)("div",{className:"formgroup mt-4",children:[Object(z.jsx)("label",{children:"Date"}),Object(z.jsx)(Le.a,{className:"form-control",selected:E,onChange:function(e){return y(e)}})]}),Object(z.jsxs)("div",{className:"flex mt-2",children:[Object(z.jsx)(ie.a,{className:"m-2 float-end btn btn-danger",onClick:function(){return p(!1)},children:"Cancel"}),Object(z.jsx)(ie.a,{className:"m-2 float-end btn btn-primary",onClick:function(e){e.preventDefault();var n,a=new FormData;Array.from(x).forEach((function(e){a.append("file",e)})),E&&a.append("date",E),t((n=a,function(){var e=Object(b.a)(j.a.mark((function e(t,a){var r,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:Se}),r=a(),c=r.userSignin.userInfo,console.log("data",n),e.prev=3,e.next=6,f.a.post("/api/file/upload",n,{headers:{Authorization:"Bearer ".concat(null===c||void 0===c?void 0:c.token),"Content-Type":"multipart/form-data"}});case 6:s=e.sent,t({type:_e,payload:s}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),t({type:we,payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n){return e.apply(this,arguments)}}()))},children:"OK"})]})]})})}),Object(z.jsx)(re.a,{show:w,children:Object(z.jsx)(re.a.Body,{children:Object(z.jsxs)(ce.a,{children:[Object(z.jsx)(re.a.Title,{className:"m-1",children:"Delete File"}),Object(z.jsxs)("p",{children:["Do you want really delete ",C.name," file?"]}),Object(z.jsxs)("div",{className:"flex mt-2",children:[Object(z.jsx)(ie.a,{className:"m-2 float-end btn btn-danger",onClick:function(){return I(!1)},children:"Cancel"}),Object(z.jsx)(ie.a,{className:"m-2 float-end btn btn-primary",onClick:function(){var e;t((e=C._id,function(){var t=Object(b.a)(j.a.mark((function t(n,a){var r,c,s,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:Ie}),r=a(),c=r.userSignin.userInfo,t.prev=2,t.next=5,f.a.delete("/api/file/"+e,{headers:{Authorization:"Bearer ".concat(null===c||void 0===c?void 0:c.token)}});case 5:s=t.sent,i=s.res,n({type:Ne,payload:i}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),n({type:Ue,payload:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}()))},children:"Delete"})]})]})})}),Object(z.jsx)(ue.a,{keyField:"_id",data:i,columns:k,search:{searchFormatted:!0},children:function(t){return Object(z.jsxs)("div",{className:"flex",children:[Object(z.jsx)(e,Object(Y.a)(Object(Y.a)({},t.searchProps),{},{className:"m-2"})),Object(z.jsx)(ie.a,{className:"float-end",onClick:function(){return p(!0)},children:"Upload Excel"}),Object(z.jsx)(ae.a,Object(Y.a)(Object(Y.a)({},t.baseProps),{},{pagination:le()()}))]})}})]})]})}function ke(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.userList})),n=t.loading,r=t.error,s=t.users;Object(a.useEffect)((function(){e(Q())}),[e]);var i=Object(a.useState)(!1),o=Object(d.a)(i,2),l=o[0],u=o[1],p=Object(a.useState)({}),h=Object(d.a)(p,2),O=h[0],x=h[1];Object(a.useEffect)((function(){u(!0)}),[O]);var m=Object(c.c)((function(e){return e.userUpdate})).updated;Object(a.useEffect)((function(){m&&e(Q())}),[m,e]);var v=Object(c.c)((function(e){return e.userDelete})).deleted;Object(a.useEffect)((function(){v&&(u(!1),e(Q()))}),[v,e]);var g=[{dataField:"#",text:"No",formatter:function(e,t,n){return Object(z.jsx)("span",{children:n+1})}},{dataField:"name",text:"Name",sort:!0},{dataField:"email",text:"Email",sort:!0},{dataField:"createdAt",text:"Created Date",formatter:pe,sort:!0},{dataField:"updatedAt",text:"Updated Date",formatter:pe,sort:!0},{dataField:"isAdmin",text:"Admin",sort:!0,formatter:function(e,t){return Object(z.jsx)("div",{children:Object(z.jsx)("span",{onClick:function(){return y(t,!0)},children:Object(z.jsx)("i",{className:e?"fa fa-check-square-o":"fa fa-square-o","aria-hidden":"true"})})})}},{dataField:"isVerified",text:"Verified",formatter:function(e,t){return Object(z.jsx)("div",{style:{textAlign:"center",cursor:"pointer",lineHeight:"normal"},children:Object(z.jsx)("span",{onClick:function(){return y(t,!1)},children:Object(z.jsx)("i",{className:e?"fa fa-check-square-o":"fa fa-square-o"})})})}},{dataField:"edit",text:"Action",formatter:function(e,t){return Object(z.jsx)("div",{style:{textAlign:"center",cursor:"pointer",lineHeight:"normal"},children:Object(z.jsx)("span",{onClick:function(){return x(t)},children:Object(z.jsx)("i",{className:"fa fa-trash-o"})})})},headerAttrs:{width:100},attrs:{width:100,class:"EditRow"}}],E=de.Search.SearchBar;function y(t,n){var a={_id:t._id,isAdmin:n?!t.isAdmin:t.isAdmin,isVerified:n?t.isVerified:!t.isVerified};e(function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n,a){var r,c,s,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:R}),r=a(),c=r.userSignin.userInfo,t.prev=2,t.next=5,f.a.put("/api/user/"+e._id,e,{headers:{Authorization:"Bearer ".concat(null===c||void 0===c?void 0:c.token)}});case 5:s=t.sent,i=s.res,n({type:P,payload:i}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),n({type:B,payload:t.t0.messageg});case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}()}(a))}return Object(z.jsxs)("div",{children:[Object(z.jsx)("h1",{className:"title",children:"User Management"}),n?Object(z.jsx)(M,{}):r?Object(z.jsx)(q,{variant:"danger",children:r}):Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(re.a,{show:l,children:Object(z.jsx)(re.a.Body,{children:Object(z.jsxs)(ce.a,{children:[Object(z.jsx)(re.a.Title,{className:"m-1",children:"Delete User"}),Object(z.jsxs)("p",{children:['Do you want really delete "',O.name,'"']}),Object(z.jsxs)("div",{className:"flex mt-2",children:[Object(z.jsx)(ie.a,{className:"m-2 float-end btn btn-danger",onClick:function(){return u(!1)},children:"Cancel"}),Object(z.jsx)(ie.a,{className:"m-2 float-end btn btn-primary",onClick:function(){return e((t=O._id,function(){var e=Object(b.a)(j.a.mark((function e(n,a){var r,c,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:k}),r=a(),c=r.userSignin.userInfo,e.prev=2,e.next=5,f.a.delete("/api/user/"+t,{headers:{Authorization:"Bearer ".concat(null===c||void 0===c?void 0:c.token)}});case 5:s=e.sent,i=s.res,n({type:A,payload:i}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),n({type:T,payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}()));var t},children:"Delete"})]})]})})}),Object(z.jsx)(ue.a,{keyField:"_id",data:s,columns:g,search:{searchFormatted:!0},children:function(e){return Object(z.jsxs)("div",{className:"flex",children:[Object(z.jsx)(E,Object(Y.a)(Object(Y.a)({},e.searchProps),{},{className:"m-2"})),Object(z.jsx)(ae.a,Object(Y.a)(Object(Y.a)({},e.baseProps),{},{pagination:le()()}))]})}})]})]})}var Ae=function(){var e=Object(c.c)((function(e){return e.userSignin})).userInfo,t=Object(c.b)();return Object(z.jsx)(o.a,{children:Object(z.jsxs)("div",{className:"grid-container",children:[Object(z.jsxs)("header",{className:"ms-row",children:[Object(z.jsx)("div",{children:Object(z.jsx)(o.b,{className:"brand",to:"/license",children:"Metastock"})}),Object(z.jsx)("div",{children:e?Object(z.jsxs)(z.Fragment,{children:[e.isAdmin?Object(z.jsx)(o.b,{to:"/user",children:"Users"}):null,Object(z.jsx)(o.b,{to:"/upload",children:"Upload"}),Object(z.jsxs)("div",{className:"dropdown",children:[Object(z.jsxs)(o.b,{to:"/#",children:[e.name," ",Object(z.jsx)("i",{className:"fa fa-caret-down"})]}),Object(z.jsxs)("ul",{className:"dropdown-content",children:[Object(z.jsx)("li",{children:Object(z.jsx)(o.b,{to:"#signout",onClick:function(){t((function(e){localStorage.removeItem("userInfo"),e({type:E}),document.location.href="/signin"}))},children:"Sign Out"})}),Object(z.jsx)("li",{children:Object(z.jsx)(o.b,{to:"/profile",children:"User Profile"})})]})]})]}):Object(z.jsx)(o.b,{to:"/signin",children:"Sign In"})})]}),Object(z.jsxs)("main",{children:[Object(z.jsx)(ve,{path:"/license",component:fe,exat:!0}),Object(z.jsx)(ve,{path:"/upload",component:De,exat:!0}),Object(z.jsx)(ve,{path:"/user",component:ke,exat:!0}),Object(z.jsx)(l.b,{path:"/signin",component:G,exat:!0}),Object(z.jsx)(l.b,{path:"/register",component:he,exat:!0}),Object(z.jsx)(ve,{path:"/profile",component:Oe}),Object(z.jsx)(l.b,{exact:!0,path:"/",children:Object(z.jsx)(l.a,{to:"/license"})})]}),Object(z.jsx)("footer",{className:"ms-row center",children:"All right reserved"})]})})},Te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,265)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},Re=n(48),Pe=n(111),Be=Object(Re.b)({userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return{loading:!0};case O:return{loading:!1,userInfo:t.payload};case x:return{loading:!1,error:t.payload};default:return e}},userSignin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return{loading:!0};case v:return{loading:!1,userInfo:t.payload};case g:return{loading:!1,error:t.payload};case E:return{};default:return e}},userDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:case w:return{loading:!0};case S:return{loading:!1,user:t.payload};case _:return{loading:!1,error:t.payload};default:return e}},licenseList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0,licenses:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return{loading:!0};case J:return{loading:!1,licenses:t.payload};case H:return{loading:!1,error:t.payload};default:return e}},licenseUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{updated:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return{updated:!1};case K:return{updated:!0};case $:return{updated:!0,error:t.payload};default:return e}},licenseDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{deleted:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return{deleted:!1};case Z:return{deleted:!0};case ee:return{deleted:!0,error:t.payload};default:return e}},fileList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0,files:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge:return{loading:!0};case Ee:return{loading:!1,files:t.payload};case ye:return{loading:!1,error:t.payload};default:return e}},fileUpload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{updated:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Se:return{uploaded:!1};case _e:return{uploaded:!0};case we:return{uploaded:!0,error:t.payload};default:return e}},fileDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{deleted:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ie:return{deleted:!1};case Ne:return{deleted:!0};case Ue:return{deleted:!0,error:t.payload};default:return e}},userUpdateProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return{loading:!0};case N:return{loading:!1,success:!0};case U:return{loading:!1,error:t.payload};case C:return{};default:return e}},userList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0,users:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return{loading:!0};case L:return{loading:!1,users:t.payload};case D:return{loading:!1,error:t.payload};default:return e}},userUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{updated:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return{updated:!1};case P:return{updated:!0};case B:return{updated:!0,error:t.payload};default:return e}},userDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{deleted:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return{deleted:!1};case A:return{deleted:!0};case T:return{deleted:!0,error:t.payload};default:return e}}}),Qe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Re.c,ze=Object(Re.d)(Be,{},Qe(Object(Re.a)(Pe.a)));n(250);i.a.render(Object(z.jsx)(c.a,{store:ze,children:Object(z.jsx)(r.a.StrictMode,{children:Object(z.jsx)(Ae,{})})}),document.getElementById("root")),Te()}},[[252,1,2]]]);
//# sourceMappingURL=main.a228e101.chunk.js.map